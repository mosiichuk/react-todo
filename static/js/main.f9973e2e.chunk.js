(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{133:function(e,t,a){e.exports=a.p+"static/media/logo.ee7cd8ed.svg"},146:function(e,t,a){e.exports=a(162)},151:function(e,t,a){},158:function(e,t,a){},160:function(e,t,a){},161:function(e,t,a){},162:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(13),o=a.n(c),s=(a(151),a(23)),i=a(42),l=a(14),u=a(214),m=a(221),d=a(207),p=a(135),f=a(201),b=a(212),g=a(223),h=a(213),E=a(7),v=a.n(E),w=a(10),k=a(37),x=a(18),y=a(203),O=a(222),j=a(206),S=a(164),I=a(208),T=a(165),L=a(209),P=a(210),q=a(211),N=a(76),C=a(77);function R(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return"https://api-nodejs-todolist.herokuapp.com"+e}function A(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=localStorage.getItem("user"),a=localStorage.getItem("token"),n=t&&a?"Bearer "+a:"",r=e?"application/json":"";return{"Content-Type":r,Authorization:n}}var U=function(){function e(){Object(N.a)(this,e)}return Object(C.a)(e,[{key:"doGet",value:function(){var e=Object(w.a)(v.a.mark((function e(){var t,a,n=arguments;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:"",e.next=3,fetch(R(t),{headers:A()});case 3:if(!((a=e.sent).status>=400)){e.next=6;break}throw new Error("Error during request. Url: ".concat(t));case 6:return e.next=8,a.json();case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"doPost",value:function(){var e=Object(w.a)(v.a.mark((function e(){var t,a,n,r=arguments;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:"",a=r.length>1&&void 0!==r[1]?r[1]:{},e.next=4,fetch(R(t),{method:"POST",headers:A(!0),body:JSON.stringify(a)});case 4:if(!((n=e.sent).status>=400)){e.next=7;break}throw new Error("Error during request. Url: ".concat(t,", data: ").concat(a));case 7:return e.next=9,n.json();case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"doDelete",value:function(){var e=Object(w.a)(v.a.mark((function e(){var t,a,n=arguments;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:"",e.next=3,fetch(R(t),{method:"DELETE",headers:A()});case 3:if(!((a=e.sent).status>=400)){e.next=6;break}throw new Error("Error during request. Url: ".concat(t,"}"));case 6:return e.next=8,a.json();case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"doPut",value:function(){var e=Object(w.a)(v.a.mark((function e(){var t,a,n,r=arguments;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:"",a=r.length>1&&void 0!==r[1]?r[1]:{},e.next=4,fetch(R(t),{method:"PUT",headers:A(!0),body:JSON.stringify(a)});case 4:if(!((n=e.sent).status>=400)){e.next=7;break}throw new Error("Error during request. Url: ".concat(t,", data: ").concat(a));case 7:return e.next=9,n.json();case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),e}(),D=new U,z=function(){function e(){Object(N.a)(this,e)}return Object(C.a)(e,[{key:"registerUser",value:function(){var e=Object(w.a)(v.a.mark((function e(){var t,a,n,r,c=arguments;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]?c[0]:{},e.next=3,D.doPost("/user/register",t);case 3:a=e.sent,n=a.user,r=a.token,localStorage.setItem("token",r),localStorage.setItem("user",JSON.stringify(n));case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"loginUser",value:function(){var e=Object(w.a)(v.a.mark((function e(){var t,a,n,r,c=arguments;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]?c[0]:{},e.next=3,D.doPost("/user/login",t);case 3:a=e.sent,n=a.user,r=a.token,localStorage.setItem("token",r),localStorage.setItem("user",JSON.stringify(n));case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"logoutUser",value:function(){var e=Object(w.a)(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D.doPost("/user/logout");case 2:e.sent.success&&(localStorage.removeItem("token"),localStorage.removeItem("user"));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),e}(),J=new z,F=Object(f.a)((function(e){return{backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"}}})),V={name:"",email:"",password:"",acceptedTerms:!1},G=k.b({name:k.c().max(15,"Must be 15 characters or less").required("Required"),email:k.c().email("Invalid email addresss").required("Required"),acceptedTerms:k.a().required("Required").oneOf([!0],"You must accept the terms and conditions."),password:k.c().min(8,"Password should contain at least 8 characters").required("Required"),repeatPassword:k.c().min(8,"Password should contain at least 8 characters").required("Required").test("passwords-match","Passwords must match",(function(e){return this.parent.password===e}))}),_=Object(l.f)((function(e){var t=e.changeLoggedIn,a=e.history,c=F(),o=Object(n.useState)(!1),i=Object(s.a)(o,2),l=i[0],u=i[1],p=Object(n.useState)(!1),f=Object(s.a)(p,2),b=f[0],g=f[1],h=function(){var e=Object(w.a)(v.a.mark((function e(n,r){var c;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=r.setSubmitting,u(!0),e.prev=2,e.next=5,J.registerUser(n);case 5:c(!0),t(!0),a.push("/"),e.next=16;break;case 10:e.prev=10,e.t0=e.catch(2),c(!0),u(!1),console.error(e.t0.message,e.t0.name),g(!0);case 16:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t,a){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,"Registration form"),r.a.createElement(x.d,{initialValues:V,validationSchema:G,onSubmit:h},(function(e){e.values;var t=e.errors,a=e.isSubmitting,n=e.isValidating,c=e.touched;return r.a.createElement(x.c,null,r.a.createElement(m.a,{mb:2},r.a.createElement(y.a,null,r.a.createElement(x.b,{as:O.a,name:"name",label:"First Name",error:c.name&&!!t.name}),r.a.createElement(x.a,{component:j.a,name:"name",error:!0})),r.a.createElement(y.a,null,r.a.createElement(x.b,{as:O.a,name:"email",type:"email",label:"Email",error:c.email&&!!t.email}),r.a.createElement(x.a,{component:j.a,name:"email",error:!0})),r.a.createElement(y.a,null,r.a.createElement(x.b,{as:O.a,name:"password",type:"password",label:"Password",error:c.password&&!!t.password}),r.a.createElement(x.a,{component:j.a,name:"password",error:!0})),r.a.createElement(y.a,null,r.a.createElement(x.b,{as:O.a,name:"repeatPassword",type:"password",label:"Repeat Password",error:c.repeatPassword&&!!t.repeatPassword}),r.a.createElement(x.a,{component:j.a,name:"repeatPassword",error:!0})),r.a.createElement(m.a,{mt:2},r.a.createElement(y.a,null,r.a.createElement(d.a,{container:!0,direction:"row",alignItems:"center"},r.a.createElement(x.b,{className:"termsAndConditionsCheckbox",name:"acceptedTerms",type:"checkbox",label:"Accept Terms And Conditions",error:c.acceptedTerms&&!!t.acceptedTerms}),r.a.createElement(S.a,null,"Terms and conditions")),r.a.createElement(x.a,{component:j.a,name:"acceptedTerms",error:!0})))),r.a.createElement(I.a,{variant:"contained",color:"primary",type:"submit",disabled:a||n},"Submit"))})),r.a.createElement(T.a,{className:c.backdrop,open:l},r.a.createElement(L.a,{color:"inherit"})),r.a.createElement(P.a,{onClose:function(){return g(!1)},"aria-labelledby":"simple-dialog-title",open:b},r.a.createElement(q.a,{id:"simple-dialog-title"},"Error during registration. This email is already in use.")))})),B=Object(f.a)((function(e){return{backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"}}})),H={email:"",password:""},M=k.b({email:k.c().email("Invalid email address").required("Required"),password:k.c().required("Required")}),Y=new z,K=Object(l.f)((function(e){var t=e.history,a=e.changeLoggedIn,c=Object(n.useState)(!1),o=Object(s.a)(c,2),i=o[0],l=o[1],u=B(),d=Object(n.useState)(!1),p=Object(s.a)(d,2),f=p[0],b=p[1],g=function(){var e=Object(w.a)(v.a.mark((function e(n,r){var c;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=r.setSubmitting,l(!0),e.prev=2,e.next=5,Y.loginUser(n);case 5:c(!0),a(!0),t.push("/"),e.next=16;break;case 10:e.prev=10,e.t0=e.catch(2),c(!0),l(!1),console.error(e.t0.message,e.t0.name),b(!0);case 16:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t,a){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,"Login form"),r.a.createElement(x.d,{initialValues:H,validationSchema:M,onSubmit:g},(function(e){e.values;var t=e.errors,a=e.isSubmitting,n=e.isValidating,c=e.touched;return r.a.createElement(x.c,null,r.a.createElement(m.a,{mb:2},r.a.createElement(y.a,null,r.a.createElement(x.b,{as:O.a,name:"email",type:"email",label:"Email",error:c.email&&!!t.email}),r.a.createElement(x.a,{component:j.a,name:"email",error:!0})),r.a.createElement(y.a,null,r.a.createElement(x.b,{as:O.a,name:"password",type:"password",label:"Password",error:c.password&&!!t.password}),r.a.createElement(x.a,{component:j.a,name:"password",error:!0}))),r.a.createElement(I.a,{variant:"contained",color:"primary",type:"submit",disabled:a||n},"Submit"))})),r.a.createElement(T.a,{className:u.backdrop,open:i},r.a.createElement(L.a,{color:"inherit"})),r.a.createElement(P.a,{onClose:function(){return b(!1)},"aria-labelledby":"simple-dialog-title",open:f},r.a.createElement(q.a,{id:"simple-dialog-title"},"Email or password is incorrect.")))}));function Q(e){var t=e.children,a=e.value,n=e.index,c=Object(p.a)(e,["children","value","index"]);return r.a.createElement("div",Object.assign({role:"tabpanel",hidden:a!==n,id:"simple-tabpanel-".concat(n),"aria-labelledby":"simple-tab-".concat(n)},c),a===n&&r.a.createElement(m.a,{p:3},t))}var W=Object(f.a)((function(e){return{root:{flexGrow:1,backgroundColor:e.palette.background.paper}}}));function X(e){var t=e.changeLoggedIn,a=W(),n=r.a.useState(0),c=Object(s.a)(n,2),o=c[0],i=c[1];return r.a.createElement("div",{className:a.root},r.a.createElement(b.a,{position:"static"},r.a.createElement(g.a,{value:o,onChange:function(e,t){i(t)},centered:!0},r.a.createElement(h.a,{label:"Login"}),r.a.createElement(h.a,{label:"Register"}))),r.a.createElement(Q,{value:o,index:0},r.a.createElement(K,{changeLoggedIn:t})),r.a.createElement(Q,{value:o,index:1},r.a.createElement(_,{changeLoggedIn:t})))}function Z(e){var t=e.changeLoggedIn;return r.a.createElement(u.a,{fixed:!0},r.a.createElement(m.a,{mt:5},r.a.createElement(d.a,{container:!0,justify:"center"},r.a.createElement(d.a,{item:!0,xs:8},r.a.createElement(X,{changeLoggedIn:t})))))}var $=a(134),ee=a(226),te=a(225),ae=a(205),ne=a(219),re=new U,ce=function(){function e(){Object(N.a)(this,e)}return Object(C.a)(e,[{key:"getAllTasks",value:function(){var e=Object(w.a)(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,re.doGet("/task");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"addTask",value:function(){var e=Object(w.a)(v.a.mark((function e(){var t,a=arguments;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},e.next=3,re.doPost("/task",t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"updateTask",value:function(){var e=Object(w.a)(v.a.mark((function e(t){var a,n=arguments;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.length>1&&void 0!==n[1]?n[1]:{},e.next=3,re.doPut("/task/".concat(t),a);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"deleteTask",value:function(){var e=Object(w.a)(v.a.mark((function e(t){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,re.doDelete("/task/".concat(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),oe=a(215),se=a(216),ie=a(217),le=a(224),ue=a(218),me=a(130),de=a.n(me),pe=a(131),fe=a.n(pe),be=(a(158),a(129)),ge=a.n(be),he=new ce,Ee=function(e){var t=e.completed,a=e.description,c=e.id,o=e.changeTaskList,i=Object(n.useState)(t),l=Object(s.a)(i,2),u=l[0],m=l[1],p=Object(n.useState)(!1),f=Object(s.a)(p,2),b=f[0],g=f[1],h=Object(n.useState)(a),E=Object(s.a)(h,2),k=E[0],x=E[1],y=Object(n.useState)(a),O=Object(s.a)(y,2),j=O[0],S=O[1],I=function(){var e=Object(w.a)(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,he.updateTask(c,{completed:!u});case 2:m(!u);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),T=function(){var e=Object(w.a)(v.a.mark((function e(t){var a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,he.deleteTask(c);case 2:a=e.sent,a.success&&o(c);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),L=function(){var e=Object(w.a)(v.a.mark((function e(t){var a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,he.updateTask(c,{description:k});case 3:a=e.sent,S(a.data.description),g(!b);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(d.a,{item:!0,xs:6},r.a.createElement(oe.a,{variant:"outlined"},r.a.createElement(se.a,{flex:"row"},r.a.createElement(ie.a,null,r.a.createElement(le.a,{checked:u,onChange:I,inputProps:{"aria-label":"primary checkbox"}}),!b&&r.a.createElement("h1",{className:u?"task-done":""},j),b&&r.a.createElement("form",{onSubmit:L},r.a.createElement(ee.a,null,r.a.createElement(te.a,{htmlFor:"my-input"},"Add new task"),r.a.createElement(ae.a,{value:k,onChange:function(e){x(e.target.value)}})),r.a.createElement(ne.a,{color:"primary",type:"submit","aria-label":"add",size:"small"},r.a.createElement(ge.a,null))),r.a.createElement(ue.a,{"aria-label":"delete",onClick:T},r.a.createElement(de.a,null)),!u&&r.a.createElement(ue.a,{"aria-label":"delete",color:b?"primary":"default",onClick:function(){x(a),g(!b)}},r.a.createElement(fe.a,null))))))},ve=a(132),we=a.n(ve),ke=new ce,xe=function(){var e=Object(n.useState)([]),t=Object(s.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)(""),i=Object(s.a)(o,2),l=i[0],p=i[1],f=JSON.parse(localStorage.getItem("user")).name;Object(n.useEffect)((function(){b()}),[]);var b=function(){var e=Object(w.a)(v.a.mark((function e(){var t;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ke.getAllTasks();case 2:t=e.sent,c(t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),g=function(){var e=Object(w.a)(v.a.mark((function e(t){var n,r,o;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,ke.addTask({description:l});case 3:n=e.sent,r=n.success,o=n.data,p(""),r&&c([].concat(Object($.a)(a),[o]));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),h=function(e){var t=a.filter((function(t){return t._id!==e}));c(t)};return r.a.createElement(u.a,null,r.a.createElement(m.a,{mt:3,mb:3},r.a.createElement(S.a,{variant:"h4",align:"center"},"Hi ",f,", here is your To-Do list")),r.a.createElement(m.a,{mt:3,mb:3},r.a.createElement("form",{onSubmit:g},r.a.createElement(d.a,{container:!0,direction:"row",alignItems:"center"},r.a.createElement(ee.a,null,r.a.createElement(te.a,{htmlFor:"my-input"},"Add new task"),r.a.createElement(ae.a,{value:l,onChange:function(e){p(e.target.value)}})),r.a.createElement(ne.a,{color:"primary",type:"submit","aria-label":"add",size:"small"},r.a.createElement(we.a,null))))),r.a.createElement(d.a,{container:!0,justify:"center",spacing:3},a.map((function(e){return r.a.createElement(Ee,{key:e._id,id:e._id,description:e.description,completed:e.completed,changeTaskList:h})}))))},ye=a(220),Oe=(a(160),new z);function je(e){var t,a=e.isLoggedIn,n=e.changeLoggedIn,c=function(){var e=Object(w.a)(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Oe.logoutUser();case 2:n(!1);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return t=a?r.a.createElement(i.b,{to:"/",onClick:c},r.a.createElement(I.a,{color:"inherit"},"Logout")):r.a.createElement(i.b,{to:"/login"},r.a.createElement(I.a,{color:"inherit"},"Login")),r.a.createElement(r.a.Fragment,null,t)}var Se=function(e){var t=e.isLoggedIn,a=e.changeLoggedIn;return r.a.createElement(b.a,{position:"static"},r.a.createElement(u.a,null,r.a.createElement(ye.a,{className:"menu-bar"},r.a.createElement(i.b,{to:"/"},r.a.createElement(S.a,{variant:"h6",className:""},"React TODO")),r.a.createElement(je,{changeLoggedIn:a,isLoggedIn:t}))))},Ie=a(133),Te=a.n(Ie);function Le(){return r.a.createElement(u.a,null,r.a.createElement("div",{className:"App"},r.a.createElement("header",{className:"App-header"},r.a.createElement("img",{src:Te.a,className:"App-logo",alt:"logo"}),r.a.createElement(S.a,{variant:"h5"},"Hi, this is simple To-Do list React app"),r.a.createElement(S.a,null,"Please login to proceed"))))}a(161);var Pe=function(){var e=Object(n.useState)(localStorage.getItem("token")&&localStorage.getItem("user")),t=Object(s.a)(e,2),a=t[0],c=t[1];return r.a.createElement(i.a,{basename:"/react-todo/"},r.a.createElement(Se,{changeLoggedIn:c,isLoggedIn:a}),r.a.createElement(l.c,null,r.a.createElement(l.a,{exact:!0,path:"/"},!a&&r.a.createElement(Le,null),a&&r.a.createElement(xe,null)),r.a.createElement(l.a,{path:"/login"},r.a.createElement(Z,{changeLoggedIn:c}))))};o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(Pe,null)),document.getElementById("root"))}},[[146,1,2]]]);
//# sourceMappingURL=main.f9973e2e.chunk.js.map